{% extends "theme/index.html" %}
{% load static %}

<!--اسم المستخدم-->
{% block username %}
{{username}}
 {% endblock %}
 {% block username2 %}
 {{username}}
  {% endblock %}

<!--ًصورة المستخدم-->
  {% block profileImg %}
  <img alt="avatar" src="../../../{{img}}" class="rounded-circle">
  {% endblock %}
  {% block profileImg2 %}
  <img alt="avatar" src="../../../{{img}}" class="rounded-circle">
  {% endblock %}

{% block clients_home %}

 
<!--الشعار و العلامة التجارية-->
<div class="row">
    <div class="col-5 text-center">
        <h4><img src="../../../{{companyLogo}}" alt="avatar" width="20%">      {{companyName}}    </h4>
        
        
    </div>
</div>
<!------------------------>


<div class="accordion searchable-container" id="accordionExample">
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingOne">
        <button class="accordion-button bg-dark" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
            إضافة حساب جديد
        </button>
      </h2>
      <div id="collapseOne" class="accordion-collapse collapse collapsed" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
        <div class="accordion-body">
         <!--show-->
         <div class="card">
   

            <div class="row card-body">
                <div class="card-header  text-center">
                   <h5>إضافة حساب جديد</h5> 
                </div>
                {{res}} 
                <!-- تبيهات-->
                <div class="col-lg-2 col-md-12">
                    <div class="form-group mt-4">
                        <label for="password">الصورة الشخصية</label>
                        <input type="file" name="userimg" id="imageInput"  accept="image/*" onchange="previewImage(event)">
                        <br>
                        <img id="imagePreview" src="" alt="Image Preview" style="max-width: 300px; display: none;">
                    
                    </div>
                </div> 
        
                <div class="col-lg-5 col-md-12 ">
                    <form action="{% url 'users_managment' companyID %}" method="post" class="form">
                        {% csrf_token %}
                        <div class="col-md-12">
                            <div class="form-group mt-4 ">
                                <label for="username ">اسم المستخدم</label>
                                <input name="username" type="text" class="form-control mb-3" id="username"   dir="ltr">
                            </div>
                        </div>  
                        <dvi class="row">
                       
                        <div class="col-md-6">
                            <div class="form-group  ">
                                <label for="first_name ">الاسم</label>
                                <input name="first_name" type="text" class="form-control mb-3" id="first_name"   dir="ltr">
                            </div>
                        </div>
        
                        <div class="col-md-6">
                            <div class="form-group ">
                                <label for="last_name ">العائلة</label>
                                <input name="last_name" type="text" class="form-control mb-3" id="last_name"   dir="ltr">
                            </div>
                        </div>
                    </dvi>
                        <div class="col-md-12">
                            <div class="form-group mt-2">
                                <label for="email">البريد الالكتروني</label>
                                <input name="email" type="email" class="form-control mb-3" id="email" placeholder="@"  >
                            </div>
                        </div>  
                        
                   
        
                       
                        
                        
                  
                </div><!--end col-->
        
                <div class="col-lg-5 col-md-12">
                    <div class="col-md-12">
                        <div class="form-group mt-4">
                            <label for="password">كلمة المرور</label>
                            <input name="password" type="password" class="form-control mb-3" id="password"   dir="ltr">
                        </div>
                    </div> 
                        <div class="col-md-12">
                            <div class="form-group mt-4 ">
                                <label for="mobile">رقم الجوال</label>
                                <input name="mobile" type="number" class="form-control mb-3" id="mobile" placeholder="05xxxxxxx"  dir="ltr">
                            </div>
                        </div>    
                        
                        <div class="col-md-12">
                            <div class="form-group mt-2">
                                <label for="position">المنصب</label>
                                    <select class="form-select" aria-label="Default select example" id="position" name="position">
                                        <option value="0">مدير عام</option>
                                        <option value="1">مدير علامة تجارية</option>
                                        <option value="2">مدير منطقة</option>
                                        <option value="3">مدير مدينة</option>
                                        <option value="4">مدير فرع</option>
                                        <option value="5">مدير ادارة</option>
                                        <option value="6">مدير قسم</option>
                                  
        
                                    </select>         
                            </div>
                        </div>                                                        
                </div><!--end col-->
        
        <div class="card-footer">
         
                <div class="form-group mt-2 mb-4 text-center">
                    <button type="submit" class="btn btn-dark col-lg-2" >حفظ</button>
                </div>
            </form>
           
        </div>       
        </div><!--end row -->

         <!--end show -->
        </div>
      </div>
    </div>
  </div>
</div>
<!----------end add new form -------------->

<div class=" searchable-container  pt-4">

    <div class="card-header text-center">
        <div class="row">
                <label> المستخدمين </label>
        </div>
    </div>

    <div class="row">
        {% for m in mngs %}
        <div class=" col-lg-12 col-md-12 pt-2 ">
            
                <div class="items">
                    <!-- <div class="user-profile" >  
                        <img src="#" alt="avatar" >
                    </div> -->
                    <div class="user-name">
                        <p class="">
                            {% if  m.position == '0' %} 
                               مدير عام
                            {% elif  m.position == '1' %} 
                                    مدير علامة تجارية
                            {% elif  m.position == '2' %} 
                                    مدير منطقة
                            {% elif  m.position == '3' %} 
                                    مدير مدينة
                            {% elif  m.position == '4' %} 
                                    مدير فرع
                            {% elif  m.position == '5' %} 
                                    مدير ادارة
                            {% elif  m.position == '6' %} 
                                     مدير قسم
                            {% else %}
                            لايوجد
                            {% endif %}
                            <span class="badge outline-badge-danger" data-toggle="modal" data-target="#exampleModalCenter{{m.id}}">تعديل </span>

                        </p>
                    </div>
                    <div class="user-name">
                        <p class=""> {{ m.user }}</p>
                    </div>
                    <div class="user-name">
                        <p class=""> {{ m.user.first_name }} {{ m.user.last_name }}</p>
                    </div>
                    <div class="user-name">
                        <p class=""> {{ m.mobile }}</p>
                    </div>
                    <div class="user-name">
                        <p class=""> {{ m.user.email }}</p>
                    </div>
                
                    
                   
                </div>
            
        {% endfor %}

        </div>
    </div>

</div><!---->

     <!-- Modal -->
     {% for m in mngs %}
     <!-- Modal -->
     <div class="modal fade" id="exampleModalCenter{{m.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
         <div class="modal-dialog modal-dialog-centered" role="document">
           <div class="modal-content">
             <div class="modal-header">
               <h5 class="modal-title" id="exampleModalLongTitle">{{ m.user.first_name }} {{ m.user.last_name }}</h5>
              
             </div>
             <div class="modal-body">
              
                 <form class="section general-info pt-4" method="post" action="{% url 'update_position_mngs' m.id%}" enctype="multipart/form-data">
                         {% csrf_token %}
                         <div class="row">
                             <div class="col-md-12  pt-4">
                                 <div class="form-group">
                                     <div class="col-lg-4 layout-spacing"   >
                                        <div class="form-group mt-2">
                                            <label for="position">المنصب</label>
                                                <select class="form-select" aria-label="Default select example" id="position" name="position">
                                                    <option value="0">مدير عام</option>
                                                    <option value="1">مدير علامة تجارية</option>
                                                    <option value="2">مدير منطقة</option>
                                                    <option value="3">مدير مدينة</option>
                                                    <option value="4">مدير فرع</option>
                                                    <option value="5">مدير ادارة</option>
                                                    <option value="6">مدير قسم</option>
                                                </select>         
                                        </div>              
                                     </div>
                                 </div>
                              </div>
                         </div>
                         <button  class="btn btn-primary" type="submit" >حفظ</button>
                     </form>
               
             </div>
             <div class="modal-footer">
               <button type="button" class="btn btn-secondary" data-dismiss="modal">اغلاق</button>
             </div>
           </div>
         </div>
       </div>
       
     
       {% endfor %}









<!--سكريبت استعراض الصورة قبل الرفع-->
<script>
    function previewImage(event) {
        var reader = new FileReader();
        reader.onload = function(){
            var output = document.getElementById('imagePreview');
            output.src = reader.result;
            output.style.display = 'block'; // Show the image preview
        }
        reader.readAsDataURL(event.target.files[0]);
    }
    </script>
      <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    
{% endblock %} 